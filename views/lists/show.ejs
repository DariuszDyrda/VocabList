<% include ../partials/header %>
<div class="ui container">
    <h2 class="ui center aligned header">
        <div class="content">
            <%= list.name %>
        </div>
    </h2>
    <p><%= list.description %></p> 
    <% if(list.author.username) { %>
        <p>Created by <%=list.author.username%></p>
    <% } %>
    <% if(user && list.author.id.equals(user._id)) { %>
    <a href="/index/<%= list._id %>/edit" class="ui button" style="float: right">Edit</a>
    <form action="/index/<%= list._id %>?_method=DELETE" method="POST">
        <button class="ui button" style="float: right">Remove</button>
    </form>
    <% } %>
    <table class="ui celled table">
        <thead>
            <tr>
                <th>Word</th>
                <th>Translation</th>
            </tr>
        </thead>
        <tbody>
            <% if(user && list.author.id.equals(user._id)) { %>
            <tr>
                <form class="ui form" action="/index/<%= list._id %>/words" method="POST">
                <td data-label="Word"><div class="ui input"><input type="text" name="word[original]" placeholder="Word"></div></td>
                <td data-label="Translation">
                    <div class="ui input">
                        <input type="text" name="word[translation]" placeholder="Translation">
                    </div>
                    <button class="ui button" type="submit" style="float: right">Submit</button>
                </td>
                </form>
            </tr>
            <% } %>
            <% list.words.forEach(word => { %>
            <tr class="wordRow">
                <td data-label="Word"><%= word.original %></td>
                <td data-label="Translation">
                    <span><%= word.translation %></span>
                    <% if(user && list.author.id.equals(user._id)) { %>
                    <button id="editButton" class="ui button" style="float: right">Edit</button>
                    <form action="/index/<%= list._id %>/words/<%= word._id %>?_method=DELETE" method="POST">
                        <button id="removeButton" type="submit" class="ui button" style="float: right">Remove</button>
                    </form>
                    <% } %>
                </td>
            </tr>
            <% if(user && list.author.id.equals(user._id)) { %>
            <tr class="hidden">
                    <form class="ui form" action="/index/<%= list._id %>/words/<%= word._id %>?_method=PUT" method="POST">
                    <td data-label="Word"><div class="ui input"><input type="text" name="word[original]" value="<%= word.original %>"></div></td>
                    <td data-label="Translation">
                        <div class="ui input">
                            <input type="text" name="word[translation]" value="<%= word.translation %>">
                        </div>
                        <button class="ui button" type="submit" style="float: right">Submit</button>
                    </td>
                    </form>
                </tr>
                <% } %>
            <% }) %>
        </tbody>
    </table>
</div>
<script src="/scripts/listShowPage.js"></script>
<% include ../partials/footer %>